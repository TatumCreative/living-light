(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function _setFn(e,t){return function(n,r,i){var s=!1;if("string"==typeof n){var o=n,u=r;s=i,e[o]=u}else{var f=n;s=r,Assign(e,f)}s||t.emit("changed",e)}}function _getFn(e){return function(t){if("string"==typeof t){var n=t;return e[n]}return e}}var EventEmitter=require("events").EventEmitter,Assign=require("object-assign");module.exports=function(e){var t=new EventEmitter;return t.setMaxListeners(0),{set:_setFn(e,t),get:_getFn(e),emitter:t,on:t.on.bind(t),off:t.removeListener.bind(t)}};

},{"events":56,"object-assign":2}],2:[function(require,module,exports){
"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=Object.assign||function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);if(Object.getOwnPropertySymbols){n=Object.getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],3:[function(require,module,exports){
function _elementOffset(e,t){try{var n=e.getBoundingClientRect()}catch(o){}return n&&(n.width||n.height)?(t.x=n.left+window.pageXOffset-document.documentElement.clientLeft,t.y=n.top+window.pageYOffset-document.documentElement.clientTop):(t.x=0,t.y=0),t}function _onTapElement(e,t,n){var o,i,r,a={},c={},u=n.devicePixelRatio&&window.devicePixelRatio>0?window.devicePixelRatio:1,l=n.touchend?"touchend":"touchstart",f=function(e){var t=e.touches[0];o=t.clientX,i=t.clientY,r=Date.now()},d=function(e){e.preventDefault(),e.stopPropagation()},s=function(n){n.preventDefault(),n.stopPropagation();var o=n.touches[0];_elementOffset(e,c),a.originalEvent=n,a.x=(o.clientX-c.x)*u,a.y=(o.clientY-c.y)*u,t(a)},v=function(n){n.preventDefault(),n.stopPropagation(),n.clientX===o&&n.clientY===i&&Date.now()-r<310||(_elementOffset(e,c),a.originalEvent=n,a.x=(n.clientX-c.x)*u,a.y=(n.clientY-c.y)*u,t(a))};return e.addEventListener("touchstart",f,!1),e.addEventListener("mousedown",d,!1),e.addEventListener(l,s,!1),e.addEventListener("click",v,!1),function(){e.removeEventListener("touchstart",f,!1),e.removeEventListener("mousedown",d,!1),e.removeEventListener("click",v,!1),e.removeEventListener(l,s,!1)}}function _onTapRouting(e,t,n){if(n=n||_defaultOptions,e instanceof Object){if(0===e.length)return[];if(1===e.length)return _onTapElement(e[0],t,n);if(e.length>1){for(var o=[],i=0;i<e.length;i++)o.push(_onTapElement(e[i],t,n));return o}return _onTapElement(e,t,n)}throw new Error("on-tap could not figure out the element provided",e)}var _defaultOptions={touch:"start"};module.exports=_onTapRouting;

},{}],4:[function(require,module,exports){
var Extend=require("lodash.assign"),delta=function(t,n){return function(){var e,a;return e=Date.now(),a=e-this.now,a=Math.min(a,t),a=Math.max(a,n),this.elapsed+=a,this.now=e,a}},start=function(){this.now=Date.now()},reset=function(){this.now=0,this.elapsed=0},getValue=function(t){return function(){return this[t]}},clock=function(t){var n=Extend({maxDt:60,minDt:16.66666667,autostart:!1},t),e=Object.preventExtensions({now:0,elapsed:0});return n.autostart!==!1&&start.bind(e)(),{start:start.bind(e),reset:reset.bind(e),now:getValue("now").bind(e),elapsed:getValue("elapsed").bind(e),delta:delta(n.maxDt,n.minDt).bind(e)}};module.exports=clock;

},{"lodash.assign":6}],5:[function(require,module,exports){
var raf=require("raf"),EventEmitter=require("events").EventEmitter,Extend=require("lodash.assign"),clock=require("./clock")(),start=function(t,e){return function(){this.started||(this.clockStarted||e.start(),t(),this.started=!0)}},stop=function(){raf.cancel(this.rafHandle),this.started=!1},createLoop=function(t,e,r){return function n(){this.rafHandle=raf(n.bind(this));var i=e.delta(),a=r({dt:i,unitDt:i/16.66666667,now:e.now(),elapsed:e.elapsed()});t.emit("update",a),t.emit("updatedone",a),t.emit("draw",a),t.emit("drawdone",a)}},passThrough=function(t){return t};module.exports=function(t){var e=Extend({emitter:new EventEmitter,customizeEvent:passThrough},t),r=Object.preventExtensions({clockStarted:!1,started:!1,rafHandle:null}),n=createLoop(e.emitter,clock,e.customizeEvent).bind(r);return{start:start(n,clock).bind(r),stop:stop.bind(r),reset:clock.reset,emitter:e.emitter}};

},{"./clock":4,"events":56,"lodash.assign":6,"raf":17}],6:[function(require,module,exports){
function assignWith(s,e,r){for(var i=-1,a=keys(e),n=a.length;++i<n;){var g=a[i],t=s[g],o=r(t,e[g],g,s,e);(o===o?o===t:t!==t)&&(void 0!==t||g in s)||(s[g]=o)}return s}var baseAssign=require("lodash._baseassign"),createAssigner=require("lodash._createassigner"),keys=require("lodash.keys"),assign=createAssigner(function(s,e,r){return r?assignWith(s,e,r):baseAssign(s,e)});module.exports=assign;

},{"lodash._baseassign":7,"lodash._createassigner":9,"lodash.keys":13}],7:[function(require,module,exports){
function baseAssign(e,s){return null==s?e:baseCopy(s,keys(s),e)}var baseCopy=require("lodash._basecopy"),keys=require("lodash.keys");module.exports=baseAssign;

},{"lodash._basecopy":8,"lodash.keys":13}],8:[function(require,module,exports){
function baseCopy(e,o,r){r||(r={});for(var a=-1,n=o.length;++a<n;){var t=o[a];r[t]=e[t]}return r}module.exports=baseCopy;

},{}],9:[function(require,module,exports){
function createAssigner(e){return restParam(function(r,a){var i=-1,t=null==r?0:a.length,l=t>2?a[t-2]:void 0,n=t>2?a[2]:void 0,o=t>1?a[t-1]:void 0;for("function"==typeof l?(l=bindCallback(l,o,5),t-=2):(l="function"==typeof o?o:void 0,t-=l?1:0),n&&isIterateeCall(a[0],a[1],n)&&(l=3>t?void 0:l,t=1);++i<t;){var s=a[i];s&&e(r,s,l)}return r})}var bindCallback=require("lodash._bindcallback"),isIterateeCall=require("lodash._isiterateecall"),restParam=require("lodash.restparam");module.exports=createAssigner;

},{"lodash._bindcallback":10,"lodash._isiterateecall":11,"lodash.restparam":12}],10:[function(require,module,exports){
function bindCallback(n,t,r){if("function"!=typeof n)return identity;if(void 0===t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,c){return n.call(t,r,e,u,c)};case 5:return function(r,e,u,c,i){return n.call(t,r,e,u,c,i)}}return function(){return n.apply(t,arguments)}}function identity(n){return n}module.exports=bindCallback;

},{}],11:[function(require,module,exports){
function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?MAX_SAFE_INTEGER:t,e>-1&&e%1==0&&t>e}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var r=typeof t;if("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var reIsUint=/^\d+$/,MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length");module.exports=isIterateeCall;

},{}],12:[function(require,module,exports){
function restParam(r,t){if("function"!=typeof r)throw new TypeError(FUNC_ERROR_TEXT);return t=nativeMax(void 0===t?r.length-1:+t||0,0),function(){for(var a=arguments,e=-1,n=nativeMax(a.length-t,0),i=Array(n);++e<n;)i[e]=a[t+e];switch(t){case 0:return r.call(this,i);case 1:return r.call(this,a[0],i);case 2:return r.call(this,a[0],a[1],i)}var c=Array(t+1);for(e=-1;++e<t;)c[e]=a[e];return c[t]=i,r.apply(this,c)}}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max;module.exports=restParam;

},{}],13:[function(require,module,exports){
function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?MAX_SAFE_INTEGER:t,e>-1&&e%1==0&&t>e}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function shimKeys(e){for(var t=keysIn(e),r=t.length,n=r&&e.length,s=!!n&&isLength(n)&&(isArray(e)||isArguments(e)),o=-1,i=[];++o<r;){var u=t[o];(s&&isIndex(u,n)||hasOwnProperty.call(e,u))&&i.push(u)}return i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function keysIn(e){if(null==e)return[];isObject(e)||(e=Object(e));var t=e.length;t=t&&isLength(t)&&(isArray(e)||isArguments(e))&&t||0;for(var r=e.constructor,n=-1,s="function"==typeof r&&r.prototype===e,o=Array(t),i=t>0;++n<t;)o[n]=n+"";for(var u in e)i&&isIndex(u,t)||"constructor"==u&&(s||!hasOwnProperty.call(e,u))||o.push(u);return o}var getNative=require("lodash._getnative"),isArguments=require("lodash.isarguments"),isArray=require("lodash.isarray"),reIsUint=/^\d+$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeKeys=getNative(Object,"keys"),MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length"),keys=nativeKeys?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&isArrayLike(e)?shimKeys(e):isObject(e)?nativeKeys(e):[]}:shimKeys;module.exports=keys;

},{"lodash._getnative":14,"lodash.isarguments":15,"lodash.isarray":16}],14:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,o){var e=null==t?void 0:t[o];return isNative(e)?e:void 0}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var o=typeof t;return!!t&&("object"==o||"function"==o)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=getNative;

},{}],15:[function(require,module,exports){
function isObjectLike(e){return!!e&&"object"==typeof e}function baseProperty(e){return function(r){return null==r?void 0:r[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function isArguments(e){return isObjectLike(e)&&isArrayLike(e)&&hasOwnProperty.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length");module.exports=isArguments;

},{}],16:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,r){var e=null==t?void 0:t[r];return isNative(e)?e:void 0}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&MAX_SAFE_INTEGER>=t}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var arrayTag="[object Array]",funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nativeIsArray=getNative(Array,"isArray"),MAX_SAFE_INTEGER=9007199254740991,isArray=nativeIsArray||function(t){return isObjectLike(t)&&isLength(t.length)&&objToString.call(t)==arrayTag};module.exports=isArray;

},{}],17:[function(require,module,exports){
for(var now=require("performance-now"),global="undefined"==typeof window?{}:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=global["request"+suffix],caf=global["cancel"+suffix]||global["cancelRequest"+suffix],isNative=!0,i=0;i<vendors.length&&!raf;i++)raf=global[vendors[i]+"Request"+suffix],caf=global[vendors[i]+"Cancel"+suffix]||global[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){isNative=!1;var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(e){if(0===queue.length){var a=now(),l=Math.max(0,frameDuration-(a-last));last=l+a,setTimeout(function(){var e=queue.slice(0);queue.length=0;for(var a=0;a<e.length;a++)if(!e[a].cancelled)try{e[a].callback(last)}catch(l){setTimeout(function(){throw l},0)}},Math.round(l))}return queue.push({handle:++id,callback:e,cancelled:!1}),id},caf=function(e){for(var a=0;a<queue.length;a++)queue[a].handle===e&&(queue[a].cancelled=!0)}}module.exports=function(e){return isNative?raf.call(global,function(){try{e.apply(this,arguments)}catch(a){setTimeout(function(){throw a},0)}}):raf.call(global,e)},module.exports.cancel=function(){caf.apply(global,arguments)};

},{"performance-now":18}],18:[function(require,module,exports){
(function (process){
(function(){var e,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(module.exports=function(){return(e()-r)/1e6},n=process.hrtime,e=function(){var e;return e=n(),1e9*e[0]+e[1]},r=e()):Date.now?(module.exports=function(){return Date.now()-r},r=Date.now()):(module.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this);

}).call(this,require('_process'))

},{"_process":57}],19:[function(require,module,exports){
var EventEmitter=require("events").EventEmitter,IsObject=require("lodash.isobject"),Each=require("lodash.foreach"),Extend=require("lodash.assign"),load=function(e,t,n,r){return function(s){var i=this.slug,a=e[s],o=this.manifest;if(!IsObject(a))return!1;this.slug&&r.emit("unload",{slug:i,manifest:o});var u=n(a,s);return parseManifest(t,u),parseManifest(a,u),this.manifest=a,this.slug=s,r.emit("load",{slug:s,globalManifest:t,manifest:a,graph:u}),!0}},parseManifest=function(e,t){return Each(e.components,function(e,n){var r;IsObject(e)?(r=IsObject(e.properties)?e.properties:{},IsObject(e["function"])?t[n]=e["function"](t,r):IsObject(e.construct)?t[n]=new e.construct(t,r):t[n]=e):t[n]=e}),t},createBlankObject=function(){return{}};module.exports=function(e,t){var n=Extend({globalManifest:{},getGraph:createBlankObject,emitter:new EventEmitter},t),r=Object.preventExtensions({slug:null,manifest:null});return{load:load(e,n.globalManifest,n.getGraph,n.emitter).bind(r),emitter:n.emitter}};

},{"events":56,"lodash.assign":20,"lodash.foreach":31,"lodash.isobject":39}],20:[function(require,module,exports){
function assignWith(s,e,r){for(var i=-1,a=keys(e),n=a.length;++i<n;){var g=a[i],t=s[g],o=r(t,e[g],g,s,e);(o===o?o===t:t!==t)&&(void 0!==t||g in s)||(s[g]=o)}return s}var baseAssign=require("lodash._baseassign"),createAssigner=require("lodash._createassigner"),keys=require("lodash.keys"),assign=createAssigner(function(s,e,r){return r?assignWith(s,e,r):baseAssign(s,e)});module.exports=assign;

},{"lodash._baseassign":21,"lodash._createassigner":23,"lodash.keys":27}],21:[function(require,module,exports){
function baseAssign(e,s){return null==s?e:baseCopy(s,keys(s),e)}var baseCopy=require("lodash._basecopy"),keys=require("lodash.keys");module.exports=baseAssign;

},{"lodash._basecopy":22,"lodash.keys":27}],22:[function(require,module,exports){
function baseCopy(e,o,r){r||(r={});for(var a=-1,n=o.length;++a<n;){var t=o[a];r[t]=e[t]}return r}module.exports=baseCopy;

},{}],23:[function(require,module,exports){
function createAssigner(e){return restParam(function(r,a){var i=-1,t=null==r?0:a.length,l=t>2?a[t-2]:void 0,n=t>2?a[2]:void 0,o=t>1?a[t-1]:void 0;for("function"==typeof l?(l=bindCallback(l,o,5),t-=2):(l="function"==typeof o?o:void 0,t-=l?1:0),n&&isIterateeCall(a[0],a[1],n)&&(l=3>t?void 0:l,t=1);++i<t;){var s=a[i];s&&e(r,s,l)}return r})}var bindCallback=require("lodash._bindcallback"),isIterateeCall=require("lodash._isiterateecall"),restParam=require("lodash.restparam");module.exports=createAssigner;

},{"lodash._bindcallback":24,"lodash._isiterateecall":25,"lodash.restparam":26}],24:[function(require,module,exports){
function bindCallback(n,t,r){if("function"!=typeof n)return identity;if(void 0===t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,c){return n.call(t,r,e,u,c)};case 5:return function(r,e,u,c,i){return n.call(t,r,e,u,c,i)}}return function(){return n.apply(t,arguments)}}function identity(n){return n}module.exports=bindCallback;

},{}],25:[function(require,module,exports){
function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?MAX_SAFE_INTEGER:t,e>-1&&e%1==0&&t>e}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var r=typeof t;if("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var reIsUint=/^\d+$/,MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length");module.exports=isIterateeCall;

},{}],26:[function(require,module,exports){
function restParam(r,t){if("function"!=typeof r)throw new TypeError(FUNC_ERROR_TEXT);return t=nativeMax(void 0===t?r.length-1:+t||0,0),function(){for(var a=arguments,e=-1,n=nativeMax(a.length-t,0),i=Array(n);++e<n;)i[e]=a[t+e];switch(t){case 0:return r.call(this,i);case 1:return r.call(this,a[0],i);case 2:return r.call(this,a[0],a[1],i)}var c=Array(t+1);for(e=-1;++e<t;)c[e]=a[e];return c[t]=i,r.apply(this,c)}}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max;module.exports=restParam;

},{}],27:[function(require,module,exports){
function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?MAX_SAFE_INTEGER:t,e>-1&&e%1==0&&t>e}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function shimKeys(e){for(var t=keysIn(e),r=t.length,n=r&&e.length,s=!!n&&isLength(n)&&(isArray(e)||isArguments(e)),o=-1,i=[];++o<r;){var u=t[o];(s&&isIndex(u,n)||hasOwnProperty.call(e,u))&&i.push(u)}return i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function keysIn(e){if(null==e)return[];isObject(e)||(e=Object(e));var t=e.length;t=t&&isLength(t)&&(isArray(e)||isArguments(e))&&t||0;for(var r=e.constructor,n=-1,s="function"==typeof r&&r.prototype===e,o=Array(t),i=t>0;++n<t;)o[n]=n+"";for(var u in e)i&&isIndex(u,t)||"constructor"==u&&(s||!hasOwnProperty.call(e,u))||o.push(u);return o}var getNative=require("lodash._getnative"),isArguments=require("lodash.isarguments"),isArray=require("lodash.isarray"),reIsUint=/^\d+$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeKeys=getNative(Object,"keys"),MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length"),keys=nativeKeys?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&isArrayLike(e)?shimKeys(e):isObject(e)?nativeKeys(e):[]}:shimKeys;module.exports=keys;

},{"lodash._getnative":28,"lodash.isarguments":29,"lodash.isarray":30}],28:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,o){var e=null==t?void 0:t[o];return isNative(e)?e:void 0}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var o=typeof t;return!!t&&("object"==o||"function"==o)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=getNative;

},{}],29:[function(require,module,exports){
function isObjectLike(e){return!!e&&"object"==typeof e}function baseProperty(e){return function(r){return null==r?void 0:r[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function isArguments(e){return isObjectLike(e)&&isArrayLike(e)&&hasOwnProperty.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length");module.exports=isArguments;

},{}],30:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,r){var e=null==t?void 0:t[r];return isNative(e)?e:void 0}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&MAX_SAFE_INTEGER>=t}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var arrayTag="[object Array]",funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nativeIsArray=getNative(Array,"isArray"),MAX_SAFE_INTEGER=9007199254740991,isArray=nativeIsArray||function(t){return isObjectLike(t)&&isLength(t.length)&&objToString.call(t)==arrayTag};module.exports=isArray;

},{}],31:[function(require,module,exports){
function createForEach(a,r){return function(e,c,o){return"function"==typeof c&&void 0===o&&isArray(e)?a(e,c):r(e,bindCallback(c,o,3))}}var arrayEach=require("lodash._arrayeach"),baseEach=require("lodash._baseeach"),bindCallback=require("lodash._bindcallback"),isArray=require("lodash.isarray"),forEach=createForEach(arrayEach,baseEach);module.exports=forEach;

},{"lodash._arrayeach":32,"lodash._baseeach":33,"lodash._bindcallback":37,"lodash.isarray":38}],32:[function(require,module,exports){
function arrayEach(r,a){for(var e=-1,n=r.length;++e<n&&a(r[e],e,r)!==!1;);return r}module.exports=arrayEach;

},{}],33:[function(require,module,exports){
function baseForOwn(e,r){return baseFor(e,r,keys)}function baseProperty(e){return function(r){return null==r?void 0:r[e]}}function createBaseEach(e,r){return function(t,n){var o=t?getLength(t):0;if(!isLength(o))return e(t,n);for(var a=r?o:-1,c=toObject(t);(r?a--:++a<o)&&n(c[a],a,c)!==!1;);return t}}function createBaseFor(e){return function(r,t,n){for(var o=toObject(r),a=n(r),c=a.length,u=e?c:-1;e?u--:++u<c;){var s=a[u];if(t(o[s],s,o)===!1)break}return r}}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function toObject(e){return isObject(e)?e:Object(e)}function isObject(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}var keys=require("lodash.keys"),MAX_SAFE_INTEGER=9007199254740991,baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor(),getLength=baseProperty("length");module.exports=baseEach;

},{"lodash.keys":34}],34:[function(require,module,exports){
function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?MAX_SAFE_INTEGER:t,e>-1&&e%1==0&&t>e}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function shimKeys(e){for(var t=keysIn(e),r=t.length,n=r&&e.length,s=!!n&&isLength(n)&&(isArray(e)||isArguments(e)),o=-1,i=[];++o<r;){var u=t[o];(s&&isIndex(u,n)||hasOwnProperty.call(e,u))&&i.push(u)}return i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function keysIn(e){if(null==e)return[];isObject(e)||(e=Object(e));var t=e.length;t=t&&isLength(t)&&(isArray(e)||isArguments(e))&&t||0;for(var r=e.constructor,n=-1,s="function"==typeof r&&r.prototype===e,o=Array(t),i=t>0;++n<t;)o[n]=n+"";for(var u in e)i&&isIndex(u,t)||"constructor"==u&&(s||!hasOwnProperty.call(e,u))||o.push(u);return o}var getNative=require("lodash._getnative"),isArguments=require("lodash.isarguments"),isArray=require("lodash.isarray"),reIsUint=/^\d+$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeKeys=getNative(Object,"keys"),MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length"),keys=nativeKeys?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&isArrayLike(e)?shimKeys(e):isObject(e)?nativeKeys(e):[]}:shimKeys;module.exports=keys;

},{"lodash._getnative":35,"lodash.isarguments":36,"lodash.isarray":38}],35:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,o){var e=null==t?void 0:t[o];return isNative(e)?e:void 0}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var o=typeof t;return!!t&&("object"==o||"function"==o)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=getNative;

},{}],36:[function(require,module,exports){
function isObjectLike(e){return!!e&&"object"==typeof e}function baseProperty(e){return function(r){return null==r?void 0:r[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function isArguments(e){return isObjectLike(e)&&isArrayLike(e)&&hasOwnProperty.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length");module.exports=isArguments;

},{}],37:[function(require,module,exports){
function bindCallback(n,t,r){if("function"!=typeof n)return identity;if(void 0===t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,c){return n.call(t,r,e,u,c)};case 5:return function(r,e,u,c,i){return n.call(t,r,e,u,c,i)}}return function(){return n.apply(t,arguments)}}function identity(n){return n}module.exports=bindCallback;

},{}],38:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,r){var e=null==t?void 0:t[r];return isNative(e)?e:void 0}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&MAX_SAFE_INTEGER>=t}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var arrayTag="[object Array]",funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nativeIsArray=getNative(Array,"isArray"),MAX_SAFE_INTEGER=9007199254740991,isArray=nativeIsArray||function(t){return isObjectLike(t)&&isLength(t.length)&&objToString.call(t)==arrayTag};module.exports=isArray;

},{}],39:[function(require,module,exports){
function isObject(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}module.exports=isObject;

},{}],40:[function(require,module,exports){
function offset(e,t){var n=e.clientX||0,r=e.clientY||0,u=bounds(t);return[n-u.left,r-u.top]}function getTargetTouch(e,t){return Array.prototype.slice.call(e).filter(function(e){return e.target===t})[0]||e[0]}function getTouch(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return null}function listeners(e,t){return function(n){t?e.addEventListener(n.type,n.listener):e.removeEventListener(n.type,n.listener)}}function normalize(e){return e.replace(/^(touch|mouse)/,"").replace(/up$/,"end").replace(/down$/,"start")}function bounds(e){return e===window||e===document||e===document.body?ROOT:e.getBoundingClientRect()}var Emitter=require("events/"),allEvents=["touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup"],ROOT={left:0,top:0};module.exports=function(e,t){function n(e,t){var n;return u&&/^touch(end|cancel)/.test(t)?(n=getTouch(e.changedTouches,u.identifier||0),n&&(u=null)):!u&&/^touchstart/.test(t)?u=n=getTargetTouch(e.changedTouches,r.target):u&&(n=getTouch(e.changedTouches,u.identifier||0)),n}t=t||{},e=e||window;var r=new Emitter;r.target=t.target||e;var u=null,o=t.filtered,c=allEvents;"string"==typeof t.type&&(c=allEvents.filter(function(e){return 0===e.indexOf(t.type)}));var i=c.map(function(e){var u=normalize(e),c=function(c){var i=c;if(/^touch/.test(e)&&(/^touchend$/.test(e)&&t.preventSimulated!==!1&&c.preventDefault(),i=o?n(c,e):getTargetTouch(c.changedTouches,r.target)),i){var a=offset(i,r.target);r.emit(u,c,a)}};return{type:e,listener:c}});return r.enable=function(){return i.forEach(listeners(e,!0)),r},r.disable=function(){return i.forEach(listeners(e,!1)),r},r.enable(),r};

},{"events/":41}],41:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};

},{}],42:[function(require,module,exports){
var Camera=function(e,t,i){var o=_.extend({fov:50,near:3,far:1e4,aspectRatio:window.innerWidth/window.innerHeight},e);this.object=new THREE.PerspectiveCamera(o.fov,o.aspect,o.near,o.far),this.object.position.x=_.isNumber(e.x)?e.x:0,this.object.position.y=_.isNumber(e.y)?e.y:0,this.object.position.z=_.isNumber(e.z)?e.z:500,t.add(this.object),i.on("resize",this.resize.bind(this))};module.exports=Camera,Camera.prototype={resize:function(){this.object.aspect=window.innerWidth/window.innerHeight,this.object.updateProjectionMatrix()},setAndUpdateFov:function(e){this.object.fov=e,this.object.updateProjectionMatrix()}};

},{}],43:[function(require,module,exports){
var OrbitControls=require("../../vendor/OrbitControls"),Controls=function(t,o){this.poem=t,this.properties=o,this.controls=new OrbitControls(this.poem.camera.object,this.poem.canvas),_.extend(this.controls,o),this.poem.emitter.on("update",this.controls.update.bind(this.controls))};module.exports=Controls;

},{"../../vendor/OrbitControls":51}],44:[function(require,module,exports){
var Touches=require("touches"),EventEmitter=require("events").EventEmitter;module.exports=function(e,t){var n=new THREE.Vector2,o=new THREE.Vector2,i=function(t,i){t.preventDefault(),o.x=2*(i[0]/e.canvas.offsetWidth)-1,o.y=-2*(i[1]/e.canvas.offsetHeight)+1,n.x=i[0],n.y=i[1]},r=Touches(e.canvas,{filtered:!0}).on("start",i).on("move",i).on("end",function(e){n.x=null,n.y=null,o.x=null,o.y=null});return e.emitter.on("destroy",function(){r.disable()}),{emitter:r,pixelPosition:n,normalizedPosition:o}};

},{"events":56,"touches":40}],45:[function(require,module,exports){
var createManifestLoader=require("poem-manifests"),EventEmitter=require("events").EventEmitter,_emitter=new EventEmitter,_loader=null,init=function(e,t){_loader=createManifestLoader(t,{emitter:_emitter,getGraph:function(t,r){return e(t,_emitter)},globalManifest:{}}),_emitter.on("load",function(e){window.poem=e.graph})},load=function(e){return _loader.load(e)};module.exports={init:init,load:load,emitter:_emitter};

},{"events":56,"poem-manifests":19}],46:[function(require,module,exports){
function _createFog(e,o,r){var t=_.extend({color:2236962,nearFactor:.5,farFactor:2},o);e.fog=new THREE.Fog(t.color,r*t.nearFactor,r*t.farFactor)}function _startAfterPromises(e){var o=_.map(e,function(e){return _.isObject(e)?e.promise:void 0}),r=_.filter(o,function(e){return!_.isUndefined(e)});Promise.all(r).then(function(){e.emitter.emit("promises"),e.loop.start()},console.log.bind(console))}var Camera=require("../components/cameras/Camera"),CreateLoop=require("poem-loop");const RATIO=_.isNumber(window.devicePixelRatio)?window.devicePixelRatio:1;module.exports=function(e,o){var r=_.extend({camera:null,fog:null,renderer:null},e.config),t={},n=CreateLoop(),a=n.emitter,i=new THREE.Scene,c=new Camera(r.camera,i,a);return _createFog(i,r.fog,c.object.position.z),o.once("load",_.partial(_startAfterPromises,t)),o.on("unload",function(){n.stop(),a.emit("destroy")}),_.extend(t,{emitter:a,on:a.on,once:a.once,off:a.removeEventListener,canvas:null,scene:i,ratio:RATIO,camera:c,$div:$("#container"),loop:n,start:n.start,stop:n.stop})};

},{"../components/cameras/Camera":42,"poem-loop":5}],47:[function(require,module,exports){
function handleNewPoem(e,r){var n=_.extend({},r),a=CreateRenderer(e,n);return ResizeHandler(e,ResizeRendererFn(a,e.camera.object)),e.emitter.on("draw",function(){a.render(e.scene,e.camera.object)}),a}var ResizeRendererFn=require("./utils/resize-renderer-fn"),ResizeHandler=require("./utils/resize-handler"),CreateRenderer=require("./utils/create-renderer");module.exports=handleNewPoem;

},{"./utils/create-renderer":48,"./utils/resize-handler":49,"./utils/resize-renderer-fn":50}],48:[function(require,module,exports){
module.exports=function(e,o){var t=_.extend({clearColor:2236962,addToDom:!0},o),n=new THREE.WebGLRenderer({alpha:!0});return n.setPixelRatio(e.ratio),n.setClearColor(t.clearColor),t.addToDom&&(document.getElementById("container").appendChild(n.domElement),e.canvas=n.domElement,e.emitter.on("destroy",function(){n.domElement.remove()})),n};

},{}],49:[function(require,module,exports){
module.exports=function(o,e){$(window).on("resize",e),o.emitter.on("destroy",function(){$(window).off("resize",e)}),e()};

},{}],50:[function(require,module,exports){
module.exports=function(n,i){return function(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)}};

},{}],51:[function(require,module,exports){
THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*E.autoRotateSpeed}function o(){return Math.pow(.95,E.zoomSpeed)}function i(t){if(E.enabled!==!1){if(t.preventDefault(),t.button===E.mouseButtons.ORBIT){if(E.noRotate===!0)return;j=V.ROTATE,f.set(t.clientX,t.clientY)}else if(t.button===E.mouseButtons.ZOOM){if(E.noZoom===!0)return;j=V.DOLLY,H.set(t.clientX,t.clientY)}else if(t.button===E.mouseButtons.PAN){if(E.noPan===!0)return;j=V.PAN,O.set(t.clientX,t.clientY)}j!==V.NONE&&(document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",s,!1),E.dispatchEvent(Y))}}function a(t){if(E.enabled!==!1){t.preventDefault();var e=E.domElement===document?E.domElement.body:E.domElement;if(j===V.ROTATE){if(E.noRotate===!0)return;b.set(t.clientX,t.clientY),T.subVectors(b,f),E.rotateLeft(2*Math.PI*T.x/e.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*T.y/e.clientHeight*E.rotateSpeed),f.copy(b)}else if(j===V.DOLLY){if(E.noZoom===!0)return;M.set(t.clientX,t.clientY),P.subVectors(M,H),P.y>0?E.dollyIn():E.dollyOut(),H.copy(M)}else if(j===V.PAN){if(E.noPan===!0)return;y.set(t.clientX,t.clientY),v.subVectors(y,O),E.pan(v.x,v.y),O.copy(y)}j!==V.NONE&&E.update()}}function s(){E.enabled!==!1&&(document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",s,!1),E.dispatchEvent(I),j=V.NONE)}function r(t){if(E.enabled!==!1&&E.noZoom!==!0&&j===V.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?E.dollyOut():E.dollyIn(),E.update(),E.dispatchEvent(Y),E.dispatchEvent(I)}}function c(t){if(E.enabled!==!1&&E.noKeys!==!0&&E.noPan!==!0)switch(t.keyCode){case E.keys.UP:E.pan(0,E.keyPanSpeed),E.update();break;case E.keys.BOTTOM:E.pan(0,-E.keyPanSpeed),E.update();break;case E.keys.LEFT:E.pan(E.keyPanSpeed,0),E.update();break;case E.keys.RIGHT:E.pan(-E.keyPanSpeed,0),E.update()}}function h(t){if(E.enabled!==!1){switch(t.touches.length){case 1:if(E.noRotate===!0)return;j=V.TOUCH_ROTATE,f.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(E.noZoom===!0)return;j=V.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+n*n);H.set(0,o);break;case 3:if(E.noPan===!0)return;j=V.TOUCH_PAN,O.set(t.touches[0].pageX,t.touches[0].pageY);break;default:j=V.NONE}j!==V.NONE&&E.dispatchEvent(Y)}}function u(t){if(E.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=E.domElement===document?E.domElement.body:E.domElement;switch(t.touches.length){case 1:if(E.noRotate===!0)return;if(j!==V.TOUCH_ROTATE)return;b.set(t.touches[0].pageX,t.touches[0].pageY),T.subVectors(b,f),E.rotateLeft(2*Math.PI*T.x/e.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*T.y/e.clientHeight*E.rotateSpeed),f.copy(b),E.update();break;case 2:if(E.noZoom===!0)return;if(j!==V.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(n*n+o*o);M.set(0,i),P.subVectors(M,H),P.y>0?E.dollyOut():E.dollyIn(),H.copy(M),E.update();break;case 3:if(E.noPan===!0)return;if(j!==V.TOUCH_PAN)return;y.set(t.touches[0].pageX,t.touches[0].pageY),v.subVectors(y,O),E.pan(v.x,v.y),O.copy(y),E.update();break;default:j=V.NONE}}}function d(){E.enabled!==!1&&(E.dispatchEvent(I),j=V.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var l,p,E=this,m=1e-6,f=new THREE.Vector2,b=new THREE.Vector2,T=new THREE.Vector2,O=new THREE.Vector2,y=new THREE.Vector2,v=new THREE.Vector2,g=new THREE.Vector3,R=new THREE.Vector3,H=new THREE.Vector2,M=new THREE.Vector2,P=new THREE.Vector2,L=0,N=0,A=1,w=new THREE.Vector3,k=new THREE.Vector3,x=new THREE.Quaternion,V={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},j=V.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone();var D=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),S=D.clone().inverse(),U={type:"change"},Y={type:"start"},I={type:"end"};this.rotateLeft=function(t){void 0===t&&(t=n()),N-=t},this.rotateUp=function(t){void 0===t&&(t=n()),L-=t},this.panLeft=function(t){var e=this.object.matrix.elements;g.set(e[0],e[1],e[2]),g.multiplyScalar(-t),w.add(g)},this.panUp=function(t){var e=this.object.matrix.elements;g.set(e[4],e[5],e[6]),g.multiplyScalar(t),w.add(g)},this.pan=function(t,e){var n=E.domElement===document?E.domElement.body:E.domElement;if(void 0!==E.object.fov){var o=E.object.position,i=o.clone().sub(E.target),a=i.length();a*=Math.tan(E.object.fov/2*Math.PI/180),E.panLeft(2*t*a/n.clientHeight),E.panUp(2*e*a/n.clientHeight)}else void 0!==E.object.top?(E.panLeft(t*(E.object.right-E.object.left)/n.clientWidth),E.panUp(e*(E.object.top-E.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){void 0===t&&(t=o()),A/=t},this.dollyOut=function(t){void 0===t&&(t=o()),A*=t},this.update=function(){var t=this.object.position;R.copy(t).sub(this.target),R.applyQuaternion(D),l=Math.atan2(R.x,R.z),p=Math.atan2(Math.sqrt(R.x*R.x+R.z*R.z),R.y),this.autoRotate&&j===V.NONE&&this.rotateLeft(n()),l+=N,p+=L,l=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,l)),p=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,p)),p=Math.max(m,Math.min(Math.PI-m,p));var e=R.length()*A;e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(w),R.x=e*Math.sin(p)*Math.sin(l),R.y=e*Math.cos(p),R.z=e*Math.sin(p)*Math.cos(l),R.applyQuaternion(S),t.copy(this.target).add(R),this.object.lookAt(this.target),N=0,L=0,A=1,w.set(0,0,0),(k.distanceToSquared(this.object.position)>m||8*(1-x.dot(this.object.quaternion))>m)&&(this.dispatchEvent(U),k.copy(this.object.position),x.copy(this.object.quaternion))},this.reset=function(){j=V.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.getPolarAngle=function(){return p},this.getAzimuthalAngle=function(){return l},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mousewheel",r,!1),this.domElement.addEventListener("DOMMouseScroll",r,!1),this.domElement.addEventListener("touchstart",h,!1),this.domElement.addEventListener("touchend",d,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",c,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,module.exports=THREE.OrbitControls;

},{}],52:[function(require,module,exports){
function _setSocketEvents(e,n){n.on("connect",function(){n.emit("setPoem",e.get("myCode")),e.set({isConnected:!0,connectionRequestSent:!0,connectionError:!1})}),n.on("disconnect",function(){e.set({isConnected:!1,connectionError:!1,theirCode:null,myCode:null,connectionRequestSent:!1})}),n.on("connect_error",function(n){e.set({connectionError:!0})}),n.on("setPoem",function(n){e.set("myCode",n)}),n.on("removePoem",function(){e.set("theirCode",null)}),n.on("message",function(e){console.log("message received",e.data)})}function _numbersOnly(e){var n=_.filter(e.split(""),function(e){var n=/[$0-9^]/;return Boolean(e.match(n))});return n.join("")}function _tryToConnectToPoem(e,n,t,o){n.emit("setClient",o,function(n){t.val()===o&&_.isString(n)&&($(".code-poem-number").blur(),e.set("theirCode",n))})}function _codeInputChangedFn(e,n,t){var o;return function(r){var c=_numbersOnly(r);return c.length>3&&(c=o),c!==o&&(3!==c.length&&o&&3===o.length&&n.emit("removeClient"),e.set({theirCode:null,codeTypedComplete:3===c.length}),3===c.length&&_tryToConnectToPoem(e,n,t,c)),o=c,c}}function _handleCodeInput(e,n){var t=$(".code-poem-number");t.on("keyup",function(){var o=_codeInputChangedFn(e,n,t);return function(){var e=t.val(),n=o(e);n!==e&&t.val(n)}}()),t.on("focus",function(){t.select(),"..."===t.val()&&t.val("")}),t.on("blur",function(){""===t.val()&&t.val("...")})}function _updateStatusMessageFn(){var e=$(".code-yours-number"),n=$(".code-status"),t=$(".code-poem-inner");return function(o){var r=!1;o.isConnected?null!==o.myCode?(e.text(o.myCode),null!==o.theirCode?(n.text("Connected"),r=!0):n.text("Type Code Here")):(n.text("Connecting"),e.text("...")):(o.connectionError?n.text("Connection Error"):n.text("Disconnected"),e.text("...")),t.toggleClass("connected",r)}}var EventEmitter=require("events").EventEmitter,CurrentState=require("@tatumcreative/current-state");module.exports=function(e,n){var e=e=io(window.location.host+"/io"),n=CurrentState({isConnected:!1,connectionError:!1,codeTypedComplete:!1,theirCode:null,myCode:null,connectionRequestSent:!1});return n.on("changed",_updateStatusMessageFn()),_handleCodeInput(n,e),_setSocketEvents(n,e),{state:n,socket:e}};

},{"@tatumcreative/current-state":1,"events":56}],53:[function(require,module,exports){
module.exports={name:"Lantern",config:{camera:{x:-300,near:.1,far:1e4,fov:40}},components:{websockets:{"function":require("../common/websockets")},renderer:{"function":require("../common/renderers/basic-renderer")},controls:{construct:require("../common/components/cameras/Controls")},mouse:{"function":require("../common/components/hids/mouse-tracker")}}};

},{"../common/components/cameras/Controls":43,"../common/components/hids/mouse-tracker":44,"../common/renderers/basic-renderer":47,"../common/websockets":52}],54:[function(require,module,exports){
var Manifest=require("./manifest"),ManifestToPoem=require("../common/core/manifestToPoem"),CreatePoem=require("../common/core/poem"),StartWebSockets=require("../common/websockets"),UiController=require("./ui-controller");!function(){ManifestToPoem.init(CreatePoem,{poem:Manifest});var e=StartWebSockets();UiController(e.socket,e.state)}();

},{"../common/core/manifestToPoem":45,"../common/core/poem":46,"../common/websockets":52,"./manifest":53,"./ui-controller":55}],55:[function(require,module,exports){
var OnTap=require("@tatumcreative/on-tap");module.exports=function(e,n){OnTap(document.getElementById("container-blocker"),function(t){if(null!==n.get("theirCode")){var i={x:t.x/window.innerWidth,y:t.y/window.innerHeight};e.emit("message",i),console.log("sending message",i)}})};

},{"@tatumcreative/on-tap":3}],56:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};

},{}],57:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}]},{},[54])
//# sourceMappingURL=bundle.js.map
